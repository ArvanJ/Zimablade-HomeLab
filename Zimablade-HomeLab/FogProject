## NodeHaus PXE Server & FOG Imaging Setup Documentation

Overview

This document outlines the full process of setting up a PXE server using the FOG Project on Ubuntu with image storage mounted from a TrueNAS share (Zima2TB). The system is branded as NodeHaus, supports remote management via Tailscale, and replaces MDT + Windows Server-based imaging workflows.

‚∏ª

üñ•Ô∏è Server Environment
	‚Ä¢	Hostname: pxeserver
	‚Ä¢	OS: Ubuntu 24.04
	‚Ä¢	FOG Version: 1.5.10.1660
	‚Ä¢	IP Address: 10.0.0.91
	‚Ä¢	Storage Share (NAS): //10.0.0.59/Zima2TB
	‚Ä¢	Mount Path: /mnt/Zima2TB
	‚Ä¢	Image Storage Path: /mnt/Zima2TB/MDTDeploymentService/fogimages

‚∏ª

‚úÖ Setup Steps

1. Install Required Packages

sudo apt update && sudo apt install -y git apache2 php php-cli php-fpm php-mysql mariadb-server mariadb-client php-curl php-mbstring php-xml php-gd php-intl php-bcmath curl cifs-utils

2. Mount NAS Storage

sudo mkdir -p /mnt/Zima2TB

Edit /etc/fstab and add:

//10.0.0.59/Zima2TB /mnt/Zima2TB cifs credentials=/etc/fognas-credentials,uid=fogproject,gid=www-data,file_mode=0777,dir_mode=0777,nounix,noserverino 0 0

Create credential file:

sudo nano /etc/fognas-credentials
# Add:
username=youruser
password=yourpass

Then:

sudo chmod 600 /etc/fognas-credentials
sudo mount -a

3. Clone and Move FOG Installer

cd ~
git clone https://github.com/FOGProject/fogproject.git
mv fogproject /home/pxe/fogproject
cd /home/pxe/fogproject/bin

4. Configure .fogsettings

sudo nano /opt/fog/.fogsettings
# Ensure this line is set:
storageLocation='/mnt/Zima2TB/MDTDeploymentService/fogimages'

5. Install FOG

sudo ./installfog.sh

Respond to prompts:
	‚Ä¢	Normal Server
	‚Ä¢	Interface: ens18
	‚Ä¢	FOG DHCP: No
	‚Ä¢	FOG DNS: No
	‚Ä¢	HTTPS: No
	‚Ä¢	Firewall disable: No

When prompted:
	‚Ä¢	Go to http://10.0.0.91/fog/management
	‚Ä¢	Click Install/Update Now
	‚Ä¢	Return to terminal and press Enter

‚∏ª

üåê Remote Access with Tailscale

curl -fsSL https://tailscale.com/install.sh | sh
sudo tailscale up

Get the IP via:

tailscale ip -4

Access FOG remotely:

http://100.x.x.x/fog/management


‚∏ª

üé® PXE Branding (NodeHaus)
	‚Ä¢	Custom banner image: /var/www/html/fog/service/ipxe/bg.png
	‚Ä¢	SHA256 calculated via:

sha256sum /var/www/html/fog/service/ipxe/bg.png

	‚Ä¢	Colors (FOG UI ‚Üí PXE Boot Settings):
	‚Ä¢	Main Colors: colour --rgb 0x1f75fe 1
	‚Ä¢	Valid Host Colors: colour --rgb 0x1f75fe 0
	‚Ä¢	Invalid Host Colors: colour --rgb 0xff3c38 0
	‚Ä¢	Pairings: cpair --foreground 7 --background 1
	‚Ä¢	Background File: bg.png

‚∏ª

üß™ Linux Mint PXE Boot Entry
	1.	Mount ISO:

sudo mkdir -p /mnt/mint
sudo mount -o loop /mnt/Zima2TB/MDTDeploymentService/Operating\ Systems/linuxmint-22.1-xfce-64bit.iso /mnt/mint

	2.	Copy boot files:

sudo mkdir -p /var/www/html/os/linuxmint
sudo cp /mnt/mint/casper/vmlinuz /var/www/html/os/linuxmint/
sudo cp /mnt/mint/casper/initrd.lz /var/www/html/os/linuxmint/
rsync -av /mnt/mint/ /var/www/html/os/linuxmint/files/

	3.	PXE Menu Entry:

LABEL linuxmint
    MENU LABEL Boot Linux Mint 22.1 XFCE
    KERNEL http://10.0.0.91/os/linuxmint/vmlinuz
    INITRD http://10.0.0.91/os/linuxmint/initrd.lz
    APPEND boot=casper netboot=http url=http://10.0.0.91/os/linuxmint/files/ locale=en_US.UTF-8 keyboard-setup/layoutcode=us


‚∏ª

üì• Replacing MDT with FOG
	‚Ä¢	Deploy MDT image to test machine
	‚Ä¢	PXE boot into FOG ‚Üí Full Host Registration
	‚Ä¢	Assign image definition
	‚Ä¢	Capture image (Single Disk Resizable)
	‚Ä¢	Now you can deploy it via FOG

‚∏ª

üîê Default Credentials
	‚Ä¢	Username: fog
	‚Ä¢	Password: password

To reset:

UPDATE users SET uPass=MD5('yournewpassword') WHERE uName='fog';


‚∏ª

üöÄ Next Steps
	‚Ä¢	Add more PXE boot ISOs (Ubuntu, Kali, etc.)
	‚Ä¢	Test Snapins (domain join, post-deploy setup)
	‚Ä¢	Push to production server after final validation
